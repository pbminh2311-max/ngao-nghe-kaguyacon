/* Base styles */
html,body{height:100%;margin:0;color:#eef1f5;font-family:Inter,system-ui,Segoe UI,Arial}

/* Background with grid overlay */
body{
	background:
		radial-gradient(1200px 800px at 10% -10%, rgba(39,150,255,0.25), transparent 55%),
		radial-gradient(1000px 600px at 110% 10%, rgba(255,83,112,0.18), transparent 55%),
		linear-gradient(180deg, #0b1220 0%, #0a0f19 55%, #0b0f18 100%);
	position:relative;
	overflow:auto;
}
body::before{
	content:"";
	position:fixed; inset:0;
	background:
		repeating-linear-gradient(0deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 40px),
		repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 40px);
	pointer-events:none;
	mix-blend-mode:soft-light;
}

#gameWrap{
	display:flex;flex-direction:column;min-height:100vh;padding:16px;box-sizing:border-box;
	max-width:1100px;margin:0 auto;gap:10px;
	position:relative;
}

/* Glass card component */
.card{
	background:linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.05));
	border:1px solid rgba(255,255,255,0.12);
	box-shadow:0 20px 40px rgba(0,0,0,0.35);
	border-radius:12px;
	backdrop-filter:saturate(140%) blur(6px);
	-webkit-backdrop-filter:saturate(140%) blur(6px);
}

header.card{display:flex;justify-content:space-between;align-items:center;padding:14px 16px}

.game-container{
	position:relative;
	width:900px;
	height:560px;
	margin:0 auto;
	border-radius:14px;
	background:#0b2a3a;
	box-shadow:0 10px 30px rgba(0,0,0,0.6);
	border:1px solid rgba(255,255,255,0.08);
	overflow:hidden;
}
.game-container canvas{
	display:block;
	width:100%;
	height:100%;
	margin:0;
	background:transparent;
	border:none;
	box-shadow:none;
	border-radius:0;
}
.hud{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
.info{font-size:14px}
.controls{font-size:13px;color:#bfe}

/* Top HUD: HP lớn + tỉ số */
.top-hud.card{display:flex;align-items:center;gap:14px;padding:12px 14px}
.top-hud-inner{display:grid;grid-template-columns:1fr auto 1fr;gap:14px;align-items:center;width:100%}
.scoreboard{
	display:grid;
	grid-template-columns:auto auto auto;
	align-items:center;
	gap:14px;
	background:linear-gradient(180deg,rgba(13,26,43,0.8),rgba(9,18,32,0.86));
	border:1px solid rgba(255,255,255,0.12);
	border-radius:12px;
	padding:12px 22px;
	box-shadow:0 16px 28px rgba(12,18,30,0.45), inset 0 1px 0 rgba(255,255,255,0.05);
	position:relative;
}
.scoreboard::after{
	content:"";
	position:absolute;
	inset:0;
	border-radius:inherit;
	box-shadow:0 0 35px rgba(79,148,255,0.08);
	pointer-events:none;
}
.score-team{
	display:flex;
	flex-direction:column;
	align-items:center;
	min-width:72px;
}
.score-team .label{
	font-size:12px;
	letter-spacing:0.4px;
	text-transform:uppercase;
	color:#8faad0;
	font-weight:600;
	margin-bottom:4px;
}
.score-team .value{
	font-size:26px;
	font-weight:700;
	color:#f3f7ff;
	text-shadow:0 4px 14px rgba(8,23,43,0.6);
	transition:transform .2s ease, color .2s ease, text-shadow .2s ease;
}
.scoreboard .vs{
	font-size:13px;
	font-weight:700;
	padding:6px 12px;
	border-radius:999px;
	border:1px solid rgba(255,255,255,0.14);
	color:#a6bddf;
	text-transform:uppercase;
	letter-spacing:1.6px;
	background:linear-gradient(180deg,rgba(255,255,255,0.08),rgba(255,255,255,0.01));
	box-shadow:inset 0 1px 0 rgba(255,255,255,0.08), 0 6px 18px rgba(10,17,29,0.35);
}
.scoreboard[data-lead="p1"] .score-team.p1 .value{
	color:#5aa9ff;
	transform:translateY(-2px) scale(1.08);
	text-shadow:0 6px 16px rgba(90,169,255,0.45);
}
.scoreboard[data-lead="p2"] .score-team.p2 .value{
	color:#ff8ab0;
	transform:translateY(-2px) scale(1.08);
	text-shadow:0 6px 16px rgba(255,138,176,0.45);
}
.scoreboard[data-lead="tie"] .score-team .value{
	color:#f5f8ff;
}
.hp{
	display:flex;flex-direction:column;gap:6px;
}
.hp .hp-label{font-size:12px;color:#a5b6d8;font-weight:600;letter-spacing:.3px;text-transform:uppercase}
.hp-bar{
	position:relative;height:16px;border-radius:10px;overflow:hidden;
	background:linear-gradient(180deg,#0d1a2b,#0b1626);
	border:1px solid rgba(255,255,255,0.12);
	box-shadow:inset 0 2px 8px rgba(0,0,0,0.35);
}
.hp-fill{
	position:absolute;left:0;top:0;height:100%;width:100%;
	background:linear-gradient(90deg,#2d7bff,#21d0ff);
	box-shadow:0 0 12px rgba(45,123,255,0.45);
	transition:width .2s ease;
}
.hp.p2 .hp-fill{
	background:linear-gradient(90deg,#ff5fa9,#ff7f5f);
	box-shadow:0 0 12px rgba(255,95,169,0.45);
}
.hp-text{
	position:absolute;top:0;left:0;right:0;bottom:0;
	display:flex;align-items:center;justify-content:center;
	font-size:10px;font-weight:bold;color:#fff;
	text-shadow:1px 1px 2px rgba(0,0,0,0.8);
	pointer-events:none;z-index:2;
}
.hp-effects{
	display:flex;
	flex-wrap:wrap;
	gap:6px;
	min-height:26px;
	margin-top:6px;
	align-items:flex-start;
}
.hp-effects.empty{min-height:0;margin-top:2px;}
.hp-effects .effect{
	--effect-color:#8faad0;
	display:flex;
	align-items:center;
	gap:8px;
	padding:4px 10px;
	border-radius:12px;
	background:rgba(13,22,36,0.78);
	border:1px solid rgba(143,170,208,0.35);
	box-shadow:0 6px 16px rgba(9,15,26,0.45), inset 0 1px 0 rgba(255,255,255,0.05), 0 0 0 1px var(--effect-color);
	color:var(--effect-color);
	font-size:12px;
	font-weight:600;
	letter-spacing:0.3px;
}
.hp-effects .effect .time{
	color:#f1f6ff;
	background:rgba(255,255,255,0.08);
	padding:2px 6px;
	border-radius:8px;
	font-variant-numeric:tabular-nums;
	font-weight:500;
}

/* Button component with variants */
.btn{
	position:relative;
	--btn-from:#2d7bff;
	--btn-to:#6c5bff;
	--btn-shadow:rgba(45,123,255,0.26);
	background:linear-gradient(135deg,var(--btn-from),var(--btn-to));
	color:#fff;border:1px solid rgba(255,255,255,0.18);border-radius:12px;
	padding:8px 16px;font-size:13px;font-weight:600;
	box-shadow:0 15px 30px var(--btn-shadow);
	cursor:pointer;overflow:hidden;
	transition:transform .12s ease, box-shadow .18s ease, filter .18s ease;
}
.btn::before{
	content:"";position:absolute;inset:-120% 50%;width:120%;height:120%;
	background:radial-gradient(circle at center, rgba(255,255,255,0.55), transparent 65%);
	transform:translateX(-50%) scale(0.6);opacity:0;
	transition:opacity .3s ease, transform .3s ease;
}
.btn:hover{transform:translateY(-2px);box-shadow:0 18px 36px var(--btn-shadow);filter:brightness(1.07)}
.btn:hover::before{opacity:1;transform:translateX(-50%) scale(1)}
.btn:active{transform:translateY(0);box-shadow:0 10px 24px var(--btn-shadow);filter:brightness(0.98)}
.btn:focus-visible{outline:2px solid rgba(255,255,255,0.6);outline-offset:3px}
.hud .btn{margin-left:0}
.hud .btn + .btn{margin-left:8px}
.btn-dev{
	--btn-from:#2d7bff;
	--btn-to:#6c5bff;
	--btn-shadow:rgba(45,123,255,0.32);
}
.btn-help{
	--btn-from:#2bd6a2;
	--btn-to:#1694b8;
	--btn-shadow:rgba(43,214,162,0.34);
}
.btn-fullscreen{
	--btn-from:#5ecbff;
	--btn-to:#4c9dff;
	--btn-shadow:rgba(94,203,255,0.32);
	position:absolute;
	bottom:28px;
	right:28px;
	width:44px;
	height:44px;
	border-radius:12px;
	padding:0;
	display:flex;
	align-items:center;
	justify-content:center;
	font-size:19px;
	line-height:1;
	z-index:20;
}
.btn-fullscreen:hover{
	transform:translateY(-2px) scale(1.02);
}
.btn-fullscreen:active{
	transform:translateY(0) scale(0.98);
}
.btn-settings{
	--btn-from:#ffd166;
	--btn-to:#fca311;
	--btn-shadow:rgba(255,209,102,0.32);
}
.btn-boss{
	--btn-from:#ff5fa9;
	--btn-to:#ff8a4a;
	--btn-shadow:rgba(255,95,169,0.32);
}

/* Vệt sáng góc */
.glow{
	position:fixed; width:520px; height:520px; border-radius:50%;
	filter:blur(60px); opacity:.35; pointer-events:none; z-index:-1;
}
.glow.a{left:-120px; top:-120px; background:#2d7bff33}
.glow.b{right:-140px; bottom:-140px; background:#ff5b7a2b}

/* Hướng dẫn */
.instructions{padding:18px 20px; display:flex; flex-direction:column; gap:16px}
.hidden{display:none !important}
.instructions-header h4{margin:0;font-size:18px;font-weight:600;color:#f3f6ff}
.instructions-header p{margin:6px 0 0;color:#9fb3d6;font-size:13px}
.instructions-grid{
	display:grid;
	grid-template-columns:1fr 1fr 1fr;
	gap:16px;
	margin-top:20px;
	align-items:start;
}

.settings{
	padding:18px 20px;
	display:flex;
	flex-direction:column;
	gap:16px;
	margin-top:10px;
}
.settings-header h4{
	margin:0;
	font-size:18px;
	font-weight:600;
	color:#f3f6ff;
}
.settings-header p{
	margin:6px 0 0;
	color:#9fb3d6;
	font-size:13px;
}
.settings-grid{
	display:grid;
	grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
	gap:16px;
}
.settings-group{
	background:rgba(11,16,30,0.55);
	border:1px solid rgba(255,255,255,0.06);
	border-radius:10px;
	padding:14px 16px;
	box-shadow:inset 0 1px 0 rgba(255,255,255,0.04);
	display:flex;
	flex-direction:column;
	gap:12px;
}
.settings-title{
	font-size:14px;
	font-weight:600;
	color:#e9f1ff;
	letter-spacing:0.3px;
	text-transform:uppercase;
}
.settings-row{
	display:flex;
	align-items:center;
	justify-content:space-between;
	gap:10px;
	color:#d5e2ff;
	font-size:13px;
	background:rgba(22,32,52,0.6);
	border:1px solid rgba(132,158,207,0.25);
	border-radius:12px;
	padding:10px 12px;
	box-shadow:0 8px 18px rgba(8,15,28,0.32), inset 0 1px 0 rgba(255,255,255,0.06);
}
.settings-row label{
	display:flex;
	align-items:center;
	gap:8px;
	color:#d5ddf8;
	font-size:13px;
}
.settings-row input[type=checkbox]{
	width:44px;
	height:24px;
	border-radius:999px;
	background:linear-gradient(135deg,rgba(68,82,115,0.85),rgba(38,48,68,0.85));
	position:relative;
	border:1px solid rgba(148,176,225,0.4);
	box-shadow:inset 0 2px 5px rgba(0,0,0,0.35);
	cursor:pointer;
	transition:background .25s ease, border-color .25s ease;
	appearance:none;
}
.settings-row input[type=checkbox]::after{
	content:"";
	position:absolute;
	top:3px;
	left:3px;
	width:18px;
	height:18px;
	border-radius:50%;
	background:linear-gradient(135deg,#e5ecff,#b3c4ff);
	box-shadow:0 2px 6px rgba(12,18,32,0.6);
	transition:transform .25s ease;
}
.settings-row input[type=checkbox]:checked{
	background:linear-gradient(135deg,#5d8aff,#6cf0ff);
	border-color:rgba(96,180,255,0.7);
}
.settings-row input[type=checkbox]:checked::after{
	transform:translateX(20px);
}
.settings-row span{
	color:#d9e5ff;
	font-weight:500;
}
.settings-row button{
	padding:6px 12px;
	border-radius:8px;
	border:1px solid rgba(255,255,255,0.18);
	background:rgba(21,34,51,0.6);
	color:#f3f7ff;
	cursor:pointer;
	font-size:12px;
	transition:filter .18s ease;
}
.settings-row button:hover{
	filter:brightness(1.1);
}
.settings-input{
	background:rgba(15,24,36,0.6);
	border:1px solid rgba(143,170,208,0.35);
	color:#f3f7ff;
	border-radius:8px;
	padding:6px 8px;
	font-size:13px;
	width:80px;
}
.settings-actions{
	display:flex;
	flex-wrap:wrap;
	gap:10px;
}
.settings-actions button{
	padding:7px 18px;
	border-radius:10px;
	border:1px solid rgba(255,255,255,0.14);
	background:linear-gradient(135deg,#273247,#1b2436);
	color:#f6f8ff;
	font-size:12px;
	font-weight:600;
	cursor:pointer;
	transition:transform .12s ease, filter .18s ease, box-shadow .18s ease;
	box-shadow:0 6px 14px rgba(9,16,29,0.45);
}
.settings-actions button:hover{
	transform:translateY(-1px);
	filter:brightness(1.07);
}
.settings-actions button:active{
	transform:translateY(0);
	filter:brightness(0.95);
}
.btn-boss-action{
	background:linear-gradient(135deg,#ff6aa3,#ff9259);
	box-shadow:0 8px 20px rgba(255,120,150,0.35);
	border-color:rgba(255,150,190,0.45);
}
.player-block{
	background:rgba(11,16,30,0.55);
	border:1px solid rgba(255,255,255,0.06);
	border-radius:10px;
	padding:14px 16px;
	box-shadow:inset 0 1px 0 rgba(255,255,255,0.04);
}
.player-block ul{list-style:none;margin:10px 0 0;padding:0;display:flex;flex-direction:column;gap:8px;font-size:13px;color:#c9d5ef}
.player-block ul li{display:flex;justify-content:space-between;align-items:center;gap:14px}
.player-block span{flex:1;color:#a9b6cc}
.player-title{font-size:14px;font-weight:600;color:#e9f1ff;letter-spacing:0.3px;text-transform:uppercase}
.player-block.tips ul li{justify-content:flex-start;gap:8px;line-height:1.4}
.player-block.dev p{margin:10px 0 8px;color:#a7b9d9;font-size:13px}
#devHint{font-size:12px;color:#8fa3c8;display:none;line-height:1.5}
#devHint .hint-row{margin-bottom:4px}
kbd{
	background:linear-gradient(180deg,#172032,#1c2638);
	border:1px solid rgba(255,255,255,0.18);
	border-radius:6px;
	padding:4px 7px;
	font-family:inherit;
	font-size:12px;
	color:#f7f9ff;
	box-shadow:0 2px 6px rgba(10,12,18,0.6), inset 0 1px 0 rgba(255,255,255,0.08);
	display:inline-flex;
	align-items:center;
	justify-content:center;
	min-width:28px;
}
.hint-row kbd{margin-right:6px}
/* Ẩn block Dev trong hướng dẫn chung, thay bằng khu riêng phía dưới */
.player-block.dev{display:none}

/* Dev instructions (khu dưới) */
.dev-instructions{padding:18px 20px; display:flex; flex-direction:column; gap:16px; margin-top:10px}
.dev-instructions h4{margin:0;font-size:18px;font-weight:600;color:#f3f6ff}
.dev-instructions p{margin:6px 0 0;color:#9fb3d6;font-size:13px}
.dev-grid{display:grid;grid-template-columns:minmax(160px,220px) 1fr;gap:10px 16px;margin-top:10px}
.dev-grid .row{display:contents}
.dev-grid .key{
	display:flex;align-items:center;gap:6px;color:#c9d5ef;font-size:13px
}
.dev-grid .desc{color:#a9b6cc;font-size:13px}

/* Close button X */
.settings-close-x{
	position:absolute;
	top:12px;
	right:16px;
	width:28px;
	height:28px;
	border-radius:6px;
	background:rgba(255,255,255,0.08);
	border:1px solid rgba(255,255,255,0.12);
	color:#f3f7ff;
	cursor:pointer;
	display:flex;
	align-items:center;
	justify-content:center;
	font-size:16px;
	font-weight:600;
	transition:background .2s ease, transform .1s ease;
}
.settings-close-x:hover{
	background:rgba(255,255,255,0.15);
	transform:scale(1.05);
}
.settings-close-x:active{
	transform:scale(0.95);
}

/* Game overlay icons */
.game-overlay-icons{
	position:absolute;
	top:8px;
	right:8px;
	display:flex;
	gap:6px;
	z-index:100;
	pointer-events:none; /* Allow clicks to pass through container */
}
.game-overlay-icons > *{
	pointer-events:auto; /* Re-enable clicks on buttons */
}
.game-icon{
	width:40px;
	height:40px;
	border-radius:8px;
	background:rgba(0,0,0,0.7);
	border:1px solid rgba(255,255,255,0.2);
	color:#f3f7ff;
	cursor:pointer;
	display:flex;
	align-items:center;
	justify-content:center;
	font-size:18px;
	font-weight:600;
	transition:all .2s ease;
	backdrop-filter:blur(4px);
}
.game-icon:hover{
	background:rgba(0,0,0,0.85);
	border-color:rgba(255,255,255,0.4);
	transform:scale(1.05);
}
.game-icon:active{
	transform:scale(0.95);
}

/* Overlay panels */
.overlay-panel{
	position:fixed;
	top:0;
	left:0;
	width:100vw;
	height:100vh;
	background:rgba(0,0,0,0.75);
	display:flex;
	align-items:center;
	justify-content:center;
	z-index:1000;
}
.overlay-panel .card{
	max-width:400px;
	max-height:80vh;
	overflow-y:auto;
	margin:0;
}

/* Custom scrollbar */
.overlay-panel .card::-webkit-scrollbar{
	width:8px;
}
.overlay-panel .card::-webkit-scrollbar-track{
	background:rgba(0,0,0,0.2);
	border-radius:4px;
}
.overlay-panel .card::-webkit-scrollbar-thumb{
	background:linear-gradient(135deg,#5d8aff,#6cf0ff);
	border-radius:4px;
	border:1px solid rgba(255,255,255,0.1);
}
.overlay-panel .card::-webkit-scrollbar-thumb:hover{
	background:linear-gradient(135deg,#4c7aef,#5ce0ef);
}
/* Instructions and dev panels at bottom */
.bottom-panel{
	position:static;
	transform:none;
	margin:10px auto;
	max-width:600px;
	padding:15px;
}
/* Main Menu Overlay */
.main-menu-overlay{
	position:absolute;
	top:0;
	left:0;
	width:100%;
	height:100%;
	background:
		linear-gradient(180deg, rgba(12,16,28,0.62) 0%, rgba(8,12,24,0.86) 55%, rgba(6,9,18,0.92) 100%),
		url('../ebdbad8f-0f88-4626-8f93-4fe038906a64.jpg');
	background-size:cover;
	background-position:center;
	background-repeat:no-repeat;
	overflow:hidden;
	display:flex;
	align-items:center;
	justify-content:center;
	z-index:5;
	animation:fadeIn 0.5s ease;
}
.main-menu-overlay::before{
	content:"";
	position:absolute;
	top:0;
	left:0;
	width:100%;
	height:100%;
	background:
		repeating-linear-gradient(0deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 40px),
		repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 40px);
	pointer-events:none;
	mix-blend-mode:soft-light;
	z-index:1;
}
.main-menu-container{
	position:relative;
	z-index:2;
	max-width:560px;
	width:100%;
	margin:0 auto;
	padding:36px 48px;
	text-align:center;
}
.main-menu-title{
	font-size:64px;
	font-weight:800;
	letter-spacing:4px;
	text-transform:uppercase;
	background:linear-gradient(120deg, #ffe27a, #ff9865, #f66d92);
	-webkit-background-clip:text;
	-webkit-text-fill-color:transparent;
	background-clip:text;
	margin-bottom:24px;
	text-shadow:0 12px 48px rgba(255,185,120,0.45);
	animation:titlePulse 4s ease-in-out infinite;
}
@keyframes titlePulse{
	0%, 100%{transform:scale(1);}
	50%{transform:scale(1.05);}
}
.main-menu-subtitle{
	font-size:18px;
	color:#c6d4f1;
	margin-bottom:48px;
	letter-spacing:2.4px;
	text-transform:uppercase;
	text-shadow:0 4px 16px rgba(10,16,32,0.55);
}
.main-menu-buttons{
	display:flex;
	flex-direction:column;
	align-items:center;
	gap:28px;
	margin-bottom:56px;
}
.menu-btn{
	position:relative;
	padding:0;
	width:auto;
	font-size:24px;
	font-weight:600;
	letter-spacing:2.4px;
	line-height:1;
	text-transform:uppercase;
	border:none;
	background:none;
	color:#f5f7ff;
	cursor:pointer;
	transition:color 0.25s ease, text-shadow 0.25s ease, transform 0.2s ease;
	text-shadow:0 4px 14px rgba(8,14,32,0.55);
	position:relative;
}
.menu-version{
	position:static;
	margin:12px auto 0;
	color:#7d89a8;
	font-size:14px;
	letter-spacing:0.8px;
}
.menu-btn:hover{
	transform:translateY(-6px);
	color:#ffffff;
	text-shadow:0 8px 22px rgba(12,20,45,0.65);
}
.menu-btn:hover::before{
	opacity:1;
}
.menu-btn:active{
	transform:translateY(-2px);
	text-shadow:0 5px 16px rgba(12,20,45,0.6);
}
.menu-btn-primary{color:#f8f9ff;}
.menu-btn-boss{color:#ffd7ef;}
.menu-btn-settings{color:#ffe6b2;}